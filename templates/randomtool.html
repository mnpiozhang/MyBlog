{% extends "suit/suit.html" %}
{% block title %}随机工具|Cloudhu 个人随笔{% endblock %}

{% block content %}
<div>


<section class="vol-index" style="margin-top:0;">
	<div class="vol-header" style="border-left: 5px solid #333;font-size:1.5em;text-align: center;">随机工具</div>
	<p>为解决某人的选择困难症，可以使用该小工具。使用方式可以这样:</p>
	<ul>
		<li>输入内容共分为两部分，一个是描述，一个是随机项</li>
		<li>描述就是对该随机行为描述，例如输入今天晚上吃什么</li>
		<li>随机项就是你要随机挑选的东西，例如面条，米饭，方便面</li>
		<li>然后点击确定，就会随机在以上随机项目中选择然后输出结果"今天晚上吃什么:方便面"</li>
	</ul>
</section>

	
	<section class="vol-index">
		<form>{% csrf_token %}
			<div class="vol-header">
		        <div>
			        <table id="tab" class="table table-striped table-bordered">
			        <thead>
			            <tr>
			                <td colspan="2">随机选项</td>
			            </tr>
					</thead>
					<tbody>
			            <tr>
			            	<td><input type="text" id="formitem1" name="formitem[]" required="required"></td>
			            	<td width="25"><input type="button" name="del" value="删除"></td>
			            </tr>
			        </tbody>
			        </table>
    			</div>
			<input style="margin-bottom:1em" class="btn btn-primary btn-xs" type="button" name="add" value="增加">

			<script type="text/javascript">
			$(function(){
			    $(':button[name=add]').click(function(){
			        insertTr();
			    })
			    $(':button[name=del]').click(function(){
			        $(this).parents('tr').remove();
			    })
			})
			var fm=2;
			function insertTr(){
			    var html='';
			    html+='<tr><td><input type="text" id="formitem'+fm.toString()+'" name="formitem[]" required="required"></td>';
			    html+='<td width="25"><input type="button" name="del" value="删除"></td></tr>';
			    $('#tab').append(html);
			    $(':button[name=del]').click(function(){
			        $(this).parents('tr').remove();
			    })   
			    fm++;
			}
			</script>
			
		    <p>
		      <label>描述</label>
		      <input id="formdescription" name="formdescription" type="text" required="required">
		    </p>
			
			<input type='submit' value='确认' class="btn btn-primary" role="button"/>
			</div>
		</form>
		
	{% if randomsult %}
	<div>
	<label>{{ randomsult }}</label>
	</div>
	{% endif %}
	</section>
	
	</div>


<script>
$().ready(function() {
	$("submitform").submit(function(e) {
	
	    var url = "/blog/randomtool/";
	
	    $.ajax({
	           type: "POST",
	           url: url,
	           data: $("submitform").serialize(), // serializes the form's elements.
	           // 如果表单提交成功
	           success: function(data)
	           {
	               alert(data); // 显示django的response的内容
	           }
	         });
	
	    e.preventDefault(); // avoid to execute the actual submit of the form.
	});
});
</script>

{% endblock %}

